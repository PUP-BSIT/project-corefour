<div class="item-card">
  <div class="card-header">
    <div class="header-left">
      <div class="avatar">
        {{ userName().charAt(0).toUpperCase() }}
      </div>
      
      <div class="info-text">
        <h4 class="item-name">{{ userName() }}</h4>
        <p class="post-date">
          {{ report().date_reported | date: 'mediumDate' }}
        </p>
      </div>
    </div>

    @if (isOwner() && report().type === 'lost') {
      <div class="action-menu-container">
        <button type="button" 
                class="menu-btn" 
                (click)="toggleMenu($event)"
                aria-label="Options menu">
          <img src="assets/menu.png" alt="" aria-hidden="true"> 
        </button>
  
        @if (isMenuOpen()) {
          <div class="dropdown-menu">
            <button class="dropdown-item" (click)="onEdit($event)">
              Edit
            </button>
            
            <button class="dropdown-item delete" (click)="onDelete($event)">
              Delete
            </button>
          </div>
        }
      </div>
    } @else if (isOwner()) {
      <div class="action-menu-container">
        <button type="button" 
                class="menu-btn" 
                (click)="toggleMenu($event)"
                aria-label="Options menu">
          <img src="assets/menu.png" alt="" aria-hidden="true"> 
        </button>
  
        @if (isMenuOpen()) {
          <div class="dropdown-menu">
            <button class="dropdown-item" (click)="onViewCode($event)">
              {{ getCodeButtonLabel() }}
            </button>

            <button class="dropdown-item" (click)="onEdit($event)">
              Edit
            </button>
            
            <button class="dropdown-item delete" (click)="onDelete($event)">
              Delete
            </button>
          </div>
        }
      </div>
    } @else if (!isOwner() && report().claim_code) {
      <div class="action-menu-container">
        <button type="button" 
                class="menu-btn" 
                (click)="toggleMenu($event)"
                aria-label="Options menu">
          <img src="assets/menu.png" alt="" aria-hidden="true"> 
        </button>
  
        @if (isMenuOpen()) {
          <div class="dropdown-menu">
            <button class="dropdown-item" (click)="onViewCode($event)">
              {{ getCodeButtonLabel() }}
            </button>
          </div>
        }
      </div>
    }
  </div>

  <div class="item-image-area">
    <div class="arrow left-arrow" role="button" aria-label="Previous image">
      <img src="assets/Arrow-left.png" class="arrow-icon" aria-hidden="true" />
    </div>

    <img
      src="assets/temp-photo-item.png"
      alt="Item photo for {{ report().item_name }}"
      class="main-item-photo"
    />

    <div class="arrow right-arrow" role="button" aria-label="Next image">
      <img src="assets/arrow-right.png" class="arrow-icon" aria-hidden="true" />
    </div>
  </div>

  <div class="card-body">
    <h3 class="item-title">{{ report().item_name }}</h3>
    <p class="item-location">{{ report().location }}</p>
    <p class="item-description">
      {{ report().description }}
    </p>

    <div class="card-footer-actions">
      <button class="ticket-btn" (click)="onTicketClick()">
        Ticket
      </button>
    </div>
  </div>
</div>