<form
  [formGroup]="loginForm"
    (ngSubmit)="submitForm()"
    class="login-form-card">
  <h2>Login</h2>

  <div class="form-field">
    <label for="email">Email</label>
    <input
        id="email"
        type="email"
        formControlName="email"
        placeholder=""/>

    @if (emailControl?.invalid && (emailControl?.touched ||
      emailControl?.dirty)) {
      <div class="error-message">
        @if (emailControl?.hasError('required')) {
          <span>Email is required.</span>
        }
        @if (emailControl?.hasError('email')) {
          <span>Please enter a valid email address.</span>
        }
      </div>
    }
  </div>

  <div class="form-field">
    <label for="password">Password</label>
    <div class="password-wrapper">
      <input
        id="password"
            [type]="isPasswordVisible ? 'text' : 'password'"
            formControlName="password"
            class="password-input"/>
      <img
        [src]="isPasswordVisible ? 'assets/eye-open.png' :
          'assets/eye-close.png'"
            alt="Toggle password visibility"
            class="password-eye-icon"
            (click)="togglePasswordVisibility()"/>
    </div>

    @if (passwordControl?.invalid && (passwordControl?.touched ||
      passwordControl?.dirty)) {
      <div class="error-message">
        @if (passwordControl?.hasError('required')) {
          <span>Password is required.</span>
        }
      </div>
    }
  </div>

  @if (loginError) {
    <div class="login-error-alert">
      Invalid email or password. Please try again.
    </div>
  }

  <button
        type="submit"
        class="btn-sign-in"
        [disabled]="loginForm.invalid || isSubmitting">
    @if (isSubmitting) {
      Signing in...
    } @else {
      Sign In
    }
  </button>

  <div class="form-footer">
    <p class="create-account-text">
      No account yet? <a routerLink="/register">Create one</a>
    </p>
    <a routerLink="/forgot-password" class="forgot-password-link">
      forget Password ?
    </a>
  </div>
</form>