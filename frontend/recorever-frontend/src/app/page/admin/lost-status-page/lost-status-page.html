<div class="report-status-page">
  <header class="report-status-page__header">
    <h1 class="report-status-page__title">Lost Status Management</h1>

    <div class="report-status-page__search-wrapper">
      <app-search-bar (search)="onSearchSubmit($event)"></app-search-bar>
    </div>

    <div class="status-filter-wrapper">
      <label for="status-filter">Status:</label>
      <select id="status-filter" 
              #statusSelect
              [value]="currentStatusFilter()"
              (change)="setStatusFilter(statusSelect.value)">
        @for (status of statusFilters; track status) {
          <option [value]="status">
            {{ status | titlecase }}
          </option>
        }
      </select>
    </div>
  </header>

  <div class="controls-bar">
    <div class="sort-tabs">
      <button class="tab-btn" 
          [class.active]="currentSort() === 'all'"
          (click)="setSort('all')">
        All
      </button>
      <button class="tab-btn" 
          [class.active]="currentSort() === 'az'"
          (click)="setSort('az')">
        A-Z ↑
      </button>
      <button class="tab-btn" 
          [class.active]="currentSort() === 'date'"
          (click)="setSort('date')">
        Date ↑
      </button>
    </div>
  </div>

  <div class="report-status-page__content">
    <app-items-table-component
        [reports]="sortedReports()"
        [isLoading]="isLoading()"
        [isError]="isError()"
        (viewDetails)="onViewDetails($event)">
    </app-items-table-component>
  </div>

  @if (selectedReport()) {
    <app-report-detail-modal
        [report]="selectedReport()!"
        (close)="onCloseDetailView()"
        (statusUpdated)="onStatusUpdated($event)">
    </app-report-detail-modal>
  }
</div>