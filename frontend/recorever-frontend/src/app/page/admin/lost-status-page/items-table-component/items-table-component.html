<div class="items-table-container">
  <table class="items-table">
    <thead>
      <tr>
        <th scope="col">Type</th>
        <th scope="col">Status</th>
        <th scope="col">Item Name</th>
        <th scope="col">Reference no.</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      @if (isLoading()) {
        <tr>
          <td colspan="5" class="loading-message"
              aria-live="polite">Loading reports...</td>
        </tr>
      } @else if (isError()) {
        <tr>
          <td colspan="5" class="error-message" aria-live="polite">
                Failed to load reports. Check backend and authentication.</td>
        </tr>
      } @else {
        @for (report of reports(); track report.report_id) {
          <tr>
            <td>{{ report.type | titlecase }}</td>
           
            <td>
              <span class="status-badge"
                    [ngClass]="getDisplayStatusClass(report.status)"
                    role="status"
                    aria-label="{{ getDisplayStatus(report.status) }}">
                {{ getDisplayStatus(report.status) }}
              </span>
            </td>

            <td>{{ report.item_name }}</td>
            <td>{{ getReferenceNumber(report) }}</td>
            <td>
              <app-action-menu-component
                [report]="report"
                (viewDetails)="viewDetails.emit($event)">
              </app-action-menu-component>
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="5" class="empty-message">No reports found.</td>
          </tr>
        }
      }
    </tbody>
  </table>
</div>