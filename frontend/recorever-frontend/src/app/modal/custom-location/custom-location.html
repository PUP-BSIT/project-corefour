<div class="modal-overlay" (click)="onCancel()">
  <div class="modal-container" (click)="$event.stopPropagation()">

    <h2 class="modal-title">Custom Location</h2>
    <p class="modal-message">Enter the location you want to filter by:</p>

    <form [formGroup]="locationForm" (ngSubmit)="onConfirm()">
      <div class="input-group">
        <input
            type="text"
            formControlName="customLocation"
            placeholder="e.g., Library, Gym..."
            class="modal-input"
            [class.error]="locationForm.controls.customLocation.invalid &&
                locationForm.controls.customLocation.touched" />

        <div class="char-count">
          {{
            locationForm.controls.customLocation.value?.length || 0
          }}/{{ maxChars }}
        </div>
      </div>

      @if (locationForm.controls.customLocation.invalid &&
          locationForm.controls.customLocation.touched) {
        <div
          class="error-text">
          Location is required (max {{ maxChars }} chars).
        </div>
      }

      <div class="button-group">
        <button type="submit"
                class="btn btn-yes"
                [disabled]="locationForm.invalid">
          Apply
        </button>

        <button type="button"
                class="btn btn-cancel"
                (click)="onCancel()">
          Cancel
        </button>
      </div>
    </form>

  </div>
</div>